# ğŸ’Š Medication Agent - LangChain ë²„ì „

LangChainë§Œì„ ì‚¬ìš©í•œ ê°„ë‹¨í•œ ì•½ë¬¼ ì •ë³´ ì±—ë´‡

## ğŸš€ íŠ¹ì§•

### **ê¸°ì¡´ ë²„ì „ vs LangChain ë²„ì „**

| êµ¬ë¶„ | ê¸°ì¡´ ë²„ì „ | LangChain ë²„ì „ |
|------|-----------|----------------|
| **êµ¬ì¡°** | Streamlit â†’ FastAPI â†’ Qdrant | Streamlit â†’ LangChain â†’ Qdrant |
| **ë³µì¡ë„** | ë†’ìŒ (3ê°œ ì»´í¬ë„ŒíŠ¸) | ë‚®ìŒ (2ê°œ ì»´í¬ë„ŒíŠ¸) |
| **ì„¤ì •** | API ì„œë²„ ì‹¤í–‰ í•„ìš” | ë‹¨ì¼ ì•± ì‹¤í–‰ |
| **ìœ ì§€ë³´ìˆ˜** | ë³µì¡ | ê°„ë‹¨ |

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Streamlit     â”‚â”€â”€â”€â–ºâ”‚   LangChain     â”‚â”€â”€â”€â–ºâ”‚     Qdrant      â”‚
â”‚   (Frontend)    â”‚    â”‚   (Backend)     â”‚    â”‚   (Vector DB)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚     OpenAI      â”‚
                       â”‚   (LLM/Embed)   â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ› ï¸ ì„¤ì¹˜ ë° ì‹¤í–‰

### 1. í™˜ê²½ ì„¤ì •
```bash
# ê°€ìƒí™˜ê²½ ìƒì„±
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# íŒ¨í‚¤ì§€ ì„¤ì¹˜
pip install -r requirements.txt
```

### 2. í™˜ê²½ë³€ìˆ˜ ì„¤ì •
`.env` íŒŒì¼ ìƒì„±:
```bash
QDRANT_URL=your_qdrant_url
QDRANT_API_KEY=your_qdrant_api_key
OPENAI_API_KEY=your_openai_api_key
```

### 3. ì‹¤í–‰
```bash
streamlit run app.py
```

## ğŸ”§ LangChainì˜ ì¥ì 

### **1. ê°„ë‹¨í•œ êµ¬ì¡°**
- FastAPI ì„œë²„ ì—†ì´ ì§ì ‘ ì—°ê²°
- ë‹¨ì¼ íŒŒì¼ë¡œ ëª¨ë“  ê¸°ëŠ¥ êµ¬í˜„
- ì„¤ì • ë° ë°°í¬ ê°„ì†Œí™”

### **2. ë‚´ì¥ ê¸°ëŠ¥**
- **RetrievalQA ì²´ì¸**: RAG ì‹œìŠ¤í…œ ìë™ êµ¬ì„±
- **í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿**: êµ¬ì¡°í™”ëœ í”„ë¡¬í”„íŠ¸ ê´€ë¦¬
- **ë©”ëª¨ë¦¬ ê´€ë¦¬**: ëŒ€í™” íˆìŠ¤í† ë¦¬ ìë™ ì²˜ë¦¬
- **ì—ëŸ¬ ì²˜ë¦¬**: ë‚´ì¥ëœ ì—ëŸ¬ í•¸ë“¤ë§

### **3. í™•ì¥ì„±**
- ë‹¤ì–‘í•œ ì²´ì¸ íƒ€ì… ì§€ì›
- ì»¤ìŠ¤í…€ í”„ë¡¬í”„íŠ¸ ì‰½ê²Œ ì¶”ê°€
- ë©”ëª¨ë¦¬ ì‹œìŠ¤í…œ í†µí•©

## ğŸ“Š ê¸°ëŠ¥ ë¹„êµ

### **ê¸°ì¡´ ë²„ì „ (FastAPI)**
```python
# ë³µì¡í•œ API í˜¸ì¶œ
response = requests.post(
    f"{api_url}/search",
    headers={"x-api-key": api_key},
    json={"query": query, ...}
)
results = response.json()["results"]
```

### **LangChain ë²„ì „**
```python
# ê°„ë‹¨í•œ ì²´ì¸ í˜¸ì¶œ
result = qa_chain({"query": user_input})
ai_response = result["result"]
sources = result.get("source_documents", [])
```

## ğŸ¯ ì‚¬ìš©ë²•

1. **í…ŒìŠ¤íŠ¸ ëª¨ë“œ**: API ì—†ì´ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
2. **ì‹¤ì œ ëª¨ë“œ**: Qdrantì™€ OpenAI ì—°ê²°í•˜ì—¬ ì‹¤ì œ ê²€ìƒ‰
3. **ì˜ˆì‹œ ì§ˆë¬¸**: ë²„íŠ¼ìœ¼ë¡œ ë¹ ë¥¸ í…ŒìŠ¤íŠ¸
4. **ëŒ€í™” íˆìŠ¤í† ë¦¬**: ì„¸ì…˜ë³„ ëŒ€í™” ì €ì¥

## ğŸ’¡ ì˜ˆì‹œ ì§ˆë¬¸

- "íƒ€ì´ë ˆë†€ì˜ íš¨ëŠ¥ì´ ë­”ê°€ìš”?"
- "ì™€íŒŒë¦°ê³¼ í•¨ê»˜ ë³µìš©í•˜ë©´ ì•ˆ ë˜ëŠ” ì•½ì´ ìˆë‚˜ìš”?"
- "ì•„ì„¸íŠ¸ì•„ë¯¸ë…¸íœì˜ ë¶€ì‘ìš©ì€?"
- "íƒ€ì´ë ˆë†€ ë³µìš©ë²• ì•Œë ¤ì£¼ì„¸ìš”"
- "í˜ˆì••ì•½ ì£¼ì˜ì‚¬í•­ì´ ê¶ê¸ˆí•´ìš”"

## ğŸ” í•µì‹¬ ì»´í¬ë„ŒíŠ¸

### **RetrievalQA ì²´ì¸**
```python
qa_chain = RetrievalQA.from_chain_type(
    llm=llm,
    chain_type="stuff",
    retriever=vectorstore.as_retriever(search_kwargs={"k": 3}),
    chain_type_kwargs={"prompt": prompt_template},
    return_source_documents=True
)
```

### **í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿**
```python
prompt_template = PromptTemplate(
    input_variables=["context", "question"],
    template="""
ë‹¹ì‹ ì€ í•œêµ­ì˜ ì•½ë¬¼ ì •ë³´ ì „ë¬¸ê°€ì…ë‹ˆë‹¤...
ì°¸ê³  ì •ë³´: {context}
ì§ˆë¬¸: {question}
ë‹µë³€: ...
"""
)
```

## ğŸš€ ì¥ì  ìš”ì•½

1. **ë‹¨ìˆœì„±**: FastAPI ì„œë²„ ë¶ˆí•„ìš”
2. **ë¹ ë¥¸ ê°œë°œ**: LangChain ë‚´ì¥ ê¸°ëŠ¥ í™œìš©
3. **ìœ ì§€ë³´ìˆ˜**: ë‹¨ì¼ íŒŒì¼ë¡œ ëª¨ë“  ê¸°ëŠ¥ ê´€ë¦¬
4. **í™•ì¥ì„±**: ë‹¤ì–‘í•œ LangChain ì»´í¬ë„ŒíŠ¸ í™œìš© ê°€ëŠ¥
5. **í…ŒìŠ¤íŠ¸**: í…ŒìŠ¤íŠ¸ ëª¨ë“œë¡œ API ì—†ì´ë„ ê°œë°œ ê°€ëŠ¥

## ğŸ“ ê²°ë¡ 

LangChainë§Œìœ¼ë¡œë„ ì¶©ë¶„íˆ ê°•ë ¥í•œ RAG ì‹œìŠ¤í…œì„ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. FastAPIê°€ í•„ìš”í•œ ê²½ìš°ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

- **ë‹¤ì¤‘ í´ë¼ì´ì–¸íŠ¸ ì§€ì›** (ì›¹, ëª¨ë°”ì¼, ë‹¤ë¥¸ ì•±)
- **ë³µì¡í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**
- **ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜**
- **ê³ ì„±ëŠ¥ API ì„œë²„**

í•˜ì§€ë§Œ ë‹¨ìˆœí•œ ì±—ë´‡ì´ë¼ë©´ **LangChain ë²„ì „ì´ í›¨ì”¬ íš¨ìœ¨ì **ì…ë‹ˆë‹¤!
